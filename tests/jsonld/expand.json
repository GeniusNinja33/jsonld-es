{
   "group": "expand",
   "tests": [{
      "name": "id",
      "type": "expand",
      "input": {
         "@": "http://example.org/test#example"
      },
      "expect": {
         "@": "http://example.org/test#example"
      }
   }, {
      "name": "complex",
      "type": "expand",
      "input": {
         "@context": {
            "@coerce": {
               "xsd:anyURI": ["ex:authored", "ex:contains"]
            },
            "dc": "http://purl.org/dc/elements/1.1/",
            "ex": "http://example.org/vocab#"
         },
         "@": [{
            "@": "http://example.org/test#chapter",
            "dc:description": "Fun",
            "dc:title": "Chapter One"
         }, {
            "@": "http://example.org/test#jane",
            "ex:authored": "http://example.org/test#chapter",
            "foaf:name": "Jane"
         }, {
            "@": "http://example.org/test#john",
            "foaf:name": "John"
         }, {
            "@": "http://example.org/test#library",
            "ex:contains": {
               "@": "http://example.org/test#book",
               "dc:contributor": "Writer",
               "dc:title": "My Book",
               "ex:contains": "http://example.org/test#chapter"
            }
         }]
      },
      "expect": {
         "@": [{
            "@": "http://example.org/test#chapter",
            "http://purl.org/dc/elements/1.1/description": "Fun",
            "http://purl.org/dc/elements/1.1/title": "Chapter One"
         }, {
            "@": "http://example.org/test#jane",
            "http://example.org/vocab#authored": {
               "@iri": "http://example.org/test#chapter"
            },
            "http://xmlns.com/foaf/0.1/name": "Jane"
         }, {
            "@": "http://example.org/test#john",
            "http://xmlns.com/foaf/0.1/name": "John"
         }, {
            "@": "http://example.org/test#library",
            "http://example.org/vocab#contains": {
               "@": "http://example.org/test#book",
               "http://example.org/vocab#contains": {
                  "@iri": "http://example.org/test#chapter"
               },
               "http://purl.org/dc/elements/1.1/contributor": "Writer",
               "http://purl.org/dc/elements/1.1/title": "My Book"
            }
         }]
      }
   }, {
      "name": "coerced ex:contains",
      "type": "expand",
      "input": {
         "@context": {
            "dc": "http://purl.org/dc/elements/1.1/",
            "ex": "http://example.org/vocab#",
            "xsd": "http://www.w3.org/2001/XMLSchema#",
            "@coerce": {
               "xsd:anyURI": "ex:contains"
            }
         },
         "@": "http://example.org/test#book",
         "ex:contains": "http://example.org/test#chapter",
         "dc:title": "Title"
      },
      "expect": {
         "@": "http://example.org/test#book",
         "http://example.org/vocab#contains": {
            "@iri": "http://example.org/test#chapter"
         },
         "http://purl.org/dc/elements/1.1/title": "Title"
      }
   }, {
      "name": "remove type-coercion context and re-add",
      "type": ["expand", "compact"],
      "input": {
         "@": "http://example.org/test#example1",
         "@context": {
            "@coerce": {
               "xsd:anyURI": "ex:parent",
               "xsd:dateTime": "ex:date"
            },
            "ex": "http://example.org/vocab#",
            "xsd": "http://www.w3.org/2001/XMLSchema#"
         },
         "ex:date": "2011-01-25T00:00:00Z",
         "ex:embed": {
            "@": "http://example.org/test#example2",
            "ex:parent": "http://example.org/test#example1"
         }
      },
      "expect": {
         "@": "http://example.org/test#example1",
         "@context": {
            "@coerce": {
               "xsd:anyURI": "ex:parent",
               "xsd:dateTime": "ex:date"
            },
            "ex": "http://example.org/vocab#",
            "xsd": "http://www.w3.org/2001/XMLSchema#"
         },
         "ex:date": "2011-01-25T00:00:00Z",
         "ex:embed": {
            "@": "http://example.org/test#example2",
            "ex:parent": "http://example.org/test#example1"
         }
      },
      "context": {
         "@coerce": {
            "xsd:anyURI": "ex:parent",
            "xsd:dateTime": "ex:date"
         },
         "ex": "http://example.org/vocab#",
         "xsd": "http://www.w3.org/2001/XMLSchema#"
      }
   }, {
      "name": "native types",
      "type": "expand",
      "input": {
         "@": "http://example.org/test",
         "@context": {
            "d": "http://purl.org/dc/elements/1.1/",
            "e": "http://example.org/vocab#",
            "f": "http://xmlns.com/foaf/0.1/",
            "@coerce": {
               "xsd:double": "e:double-zero"
            }
         },
         "e:bool": true,
         "e:double": 1.230000e+00,
         "e:double-zero": 0.000000e+00,
         "e:int": 123
      },
      "expect": {
         "@": "http://example.org/test",
         "http://example.org/vocab#bool": {
            "@datatype": "http://www.w3.org/2001/XMLSchema#boolean",
            "@literal": "true"
         },
         "http://example.org/vocab#double": {
            "@datatype": "http://www.w3.org/2001/XMLSchema#double",
            "@literal": "1.230000e+00"
         },
         "http://example.org/vocab#double-zero": {
            "@datatype": "http://www.w3.org/2001/XMLSchema#double",
            "@literal": "0.000000e+00"
         },
         "http://example.org/vocab#int": {
            "@datatype": "http://www.w3.org/2001/XMLSchema#integer",
            "@literal": "123"
         }
      }
   }]
}